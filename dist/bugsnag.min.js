!function(a){var b=window.Bugsnag;window.Bugsnag=a(window,document,navigator,b)}(function(a,b,c,d){function e(a){return function(b,c){return a.call(this,w.wrap(b),c)}}function f(a){return function(b,c,d,e){return c&&c.handleEvent&&(c.handleEvent=w.wrap(c.handleEvent)),a.call(this,b,w.wrap(c),d,e)}}function g(a){a&&a.prototype&&(w.monkeyPatch(a.prototype,"addEventListener",f),w.monkeyPatch(a.prototype,"removeEventListener",f))}function h(b){var c=a.console;void 0!==c&&void 0!==c.log&&c.log("[Bugsnag] "+b)}function i(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)&&null!=d&&null!=a[d]){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f?i(f,e):encodeURIComponent(e)+"="+encodeURIComponent(f))}return c.join("&")}function j(a,b){if(null==b)return a;a=a||{};for(var c in b)if(b.hasOwnProperty(c))try{a[c]=b[c].constructor===Object?j(a[c],b[c]):b[c]}catch(d){a[c]=b[c]}return a}function k(a,b){if(w.testRequest)w.testRequest(a,b);else{var c=new Image;c.src=a+"?"+i(b)+"&ct=img&cb="+(new Date).getTime()}}function l(a){for(var b={},c=/^data\-([\w\-]+)$/,d=a.attributes,e=0;e<d.length;e++){var f=d[e];if(c.test(f.nodeName)){var g=f.nodeName.match(c)[1];b[g]=f.nodeValue}}return b}function m(a,b){z=z||l(H);var c=void 0!==w[a]?w[a]:z[a.toLowerCase()];return"false"===c&&(c=!1),void 0!==c?c:b}function n(a){return null!=a&&a.match(A)?!0:(h("Invalid API key '"+a+"'"),!1)}function o(b,d){var e=m("apiKey");if(n(e)){var f=m("releaseStage"),g=m("notifyReleaseStages");if(g){for(var h=!1,i=0;i<g.length;i++)if(f===g[i]){h=!0;break}if(!h)return}var l=j(m("metaData"),d),o=w.beforeNotify;if("function"==typeof o){var p=o(b,l);if(p===!1)return}var q=a.location;k(m("endpoint")||D,{notifierVersion:F,apiKey:e,projectRoot:m("projectRoot")||q.protocol+"//"+q.host,context:m("context")||q.pathname,userId:m("userId"),metaData:l,releaseStage:f,url:a.location.href,userAgent:c.userAgent,language:c.language||c.userLanguage,name:b.name,message:b.message,stacktrace:b.stacktrace,file:b.file,lineNumber:b.lineNumber,columnNumber:b.columnNumber})}}function p(){var a,b=10,c="[anonymous]";try{throw new Error("")}catch(d){a=q(d)}if(!a){for(var e=[],f=arguments.callee.caller.caller;f&&e.length<b;){var g=B.test(f.toString())?RegExp.$1||c:c;e.push(g),f=f.caller}a=e.join("\n")}return a}function q(a){return a.stack||a.backtrace||a.stacktrace}function r(){var a=m("metrics"),b=m("apiKey");if((a===!0||"true"===a)&&n(b)){var c="bugsnag_"+b,d=v(c);null==d&&(d=t(),u(c,d,1e3,!0)),k(m("metricsEndpoint")||E,{userId:d,apiKey:b})}}function s(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function t(){return s()+s()+"-"+s()+"-"+s()+"-"+s()+"-"+s()+s()+s()}function u(c,d,e,f){var g="",h="";if(e){var i=new Date;i.setTime(i.getTime()+1e3*60*60*24*e),h="; expires="+i.toGMTString()}if(f){var j=a.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),k=j?j[0]:"";g=k?"; domain=."+k:""}b.cookie=c+"="+encodeURIComponent(d)+h+"; path=/"+g}function v(a){var c=b.cookie.match(a+"=([^$;]+)");return c?decodeURIComponent(c[1]):null}var w={},x=0,y=[];w.noConflict=function(){a.Bugsnag=d;for(var b=0;b<y.length;b++)y[b]();return w},w.notifyException=function(a,b,c){"string"!=typeof b&&(c=b),o({name:b||a.name,message:a.message||a.description,stacktrace:q(a)||p(),file:a.fileName||a.sourceURL,lineNumber:a.lineNumber||a.line},c)},w.notify=function(a,b,c){o({name:a,message:b,stacktrace:p()},c)},w.monkeyPatch=function(a,b,c){var d=a[b];if(d&&d.bugsnag)return a[b]=d.bugsnag,void 0;var e=c(d);a[b]=e,d&&(d.bugsnag=e),e.bugsnag=e,y.push(function(){d&&delete d.bugsnag,a[b]=d})},w.wrap=function(a){return"function"!=typeof a?a:a.bugsnag?a.bugsnag:(a.bugsnag=function(){try{return a.apply(this,arguments)}catch(b){throw w.notifyException(b),x+=1,setTimeout(function(){x-=1}),b}},a.bugsnag.bugsnag=a.bugsnag,a.bugsnag)},w.monkeyPatch(a,"onerror",function(a){return w._onerror=a,function(a,b,c,d,e){var f=m("autoNotify",!0);f&&"Script error."===a&&""===b&&0===c&&(h("Error on cross-domain script, couldn't notify Bugsnag."),f=!1),f&&!x&&o({name:"window.onerror",message:a,file:b,lineNumber:c,columnNumber:d,stacktrace:e&&q(e)}),w._onerror&&w._onerror(a,b,c,d,e)}}),w.monkeyPatch(a,"setTimeout",e),w.monkeyPatch(a,"setInterval",e),a.requestAnimationFrame&&w.monkeyPatch(a,"requestAnimationFrame",e),a.EventTarget?(g(a.EventTarget),g(a.Window)):(g(a.Window),g(a.Node),g(a.XMLHttpRequest));var z,A=/^[0-9a-f]{32}$/i,B=/function\s*([\w\-$]+)?\s*\(/i,C="https://notify.bugsnag.com/",D=C+"js",E=C+"metrics",F="1.0.10",G=b.getElementsByTagName("script"),H=G[G.length-1];return r(),w});